---
layout: docs
category: 소프트웨어
title: Git
slug: ko.Git
icon: icon-git.png
order: 0x30
---
# GIT: 소개
> *참조: [Pro Git, 2nd Edition](https://git-scm.com/book/)*

[Git](https://git-scm.com/)은 버전 관리 시스템 중 하나로 프로젝트 관리에 사용되는 소프트웨어이다. 비록 Subversion과 같은 Git이 아닌 소프트웨어라도 버전 관리 시스템은 개발자들에게 프로젝트 관리 및 작업에 효율성을 증대시키는 매우 유용한 기능을 제공하며, 대표적인 Git 호스팅 서비스로 [GitHub](https://github.com/) 및 [GitLab](https://gitlab.com/) 등이 존재한다. 본 장은 버전 관리의 기초적인 개념 및 원리를 시작으로 Git에 대하여 기본적인 내용을 소개한다.

## 버전 관리
[버전 관리](https://ko.wikipedia.org/wiki/버전_관리)(version control)는 파일의 변화를 기록하는 시스템으로 언제든지 원하는 버전으로 되돌아갈 수 있도록 한다. 소스 코드 뿐만 아니라 파일 혹은 프로젝트 전체를 이전 상태로 되돌릴 수도 있다. 이러한 특성 덕분에 진행되고 있는 프로젝트에 문제 혹은 결함이 발생할 때 버전 관리를 통해 stable 했던 상태로 복원이 가능하다. 문서를 작성하거나 게임을 할 때 저장하는 것과 마찬가지로, 버전 관리는 프로젝트의 현 상태를 저장하여 나중에 불러올 수 있는 기능이다.

### 로컬 버전 관리
로컬 버전 관리 시스템(local version control system; LVCS)은 가장 간단한 형태의 버전 관리 시스템으로 파일 변경사항 기록들은 프로젝트를 작업하는 로컬 장치에 저장되어 있다. 단, 변경사항 기록 데이터가 손상되면 프로젝트 버전 이동이 불가능하다.

![로컬 버전 관리 시스템 (LVCS)](/images/docs/git/vcs_local.png)

### 중앙 버전 관리
중앙 버전 관리 시스템(centralized version control system; CVCS)은 파일 변경사항 기록을 서버에서 관리하여 클라이언트에게 작업할 프로젝트를 제공하므로써 여러 사용자가 협업할 수 있도록 한다. CVCS는 여러 장점을 갖는데, 그 예시로 효율적인 관리와 사용자들 간 어떠한 작업을 진행하고 있는지 확인할 수 있는 점 등이 있다. 그러나 서버가 다운되면 작업을 진행하지 못하며, 데이터베이스가 손상되면 프로젝트 작업을 전부 잃게 되는 치명적인 단점을 지닌다.

![중앙 버전 관리 시스템 (CVCS)](/images/docs/git/vcs_centralized.png)

### 분산 버전 관리
분산 버전 관리 시스템(distirbuted version control system; DVCS)은 서버에서만 버전을 관리하는 게 아니라 프로젝트 작업에 임하는 클라이언트 측에서도 할 수 있다. 바로 서버가 가지고 있던 파일 변경사항 기록 전체를 클라이언트 컴퓨터로 복사하기 때문이다. 그러므로 서버와 연결이 불가하더라도 클라이언트가 자체적으로 버전 관리가 가능하며, 서버 연결이 재개되면 클라이언트에서 진행된 변경 내역들을 서버로 업데이트 할 수 있다.

> Git은 분산 버전 관리 시스템을 활용한 소프트웨어이다.

![분산 버전 관리 시스템 (DVCS)](/images/docs/git/vcs_distributed.png)

## 시스템 상태
시스템 상태(system state)는 시스템을 정상적으로 구동하기 위해 필요한 정보들을 의미한다. 본문은 작업공간 혹은 프로젝트를 하나의 시스템 단위로 보고 있으므로, 여기서 논하는 시스템 상태는 프로젝트 경로에 있는 소스 코드, 리소스 파일, 프로젝트 환경 및 설정 등이 해당된다. 현 작업공간 혹은 프로젝트를 저장하는 방법으로 시스템 상태를 저장하는데, 이를 응용하기 몇 가지의 접근법을 설명한다.

### 백업
[백업](https://ko.wikipedia.org/wiki/백업)(backup)은 시스템 전체에 대한 복사본이다. 버전 관리를 대상으로 예를 들면 프로젝트 경로에 있는 모든 파일들을 하나의 압축 파일로 저장하는 것과 동일한 이치이다. 그러나 버전마다 백업을 생성한다는 것은 사실상 시간이 너무 오래 걸려 비효율적이고, 만일 백업 진행 도중에 타 프로세스의 데이터 write 간섭 등의 의한 백업 데이터 손상 위험이 발생할 수 있다.

### 델타
[델타](https://en.wikipedia.org/wiki/Delta_encoding)(delta; 혹은 diff)란 파일의 변화를 가리키며, 이는 수학에서 변화량을 나타내는 $\Delta$ 기호에서 비롯된 용어이다. 그러므로 델타 기반은 버전마다 각 파일의 변화를 기록하는 기법으로 버전을 관리하는 시스템이다. 그리고 파일에 델타를 적용하는 작업을 패치(patch)라고 부른다.

![델타 기법 버전 관리 시스템](/images/docs/git/vcs_delta.png)

위의 그림에 나타난  $\Delta$ 기호들은 이전 버전에 비해 변경된 내용으로, File A의 경우에 Version 1에서 $\Delta 1$ 패치를 적용하면 Version 2 파일로 변경된다. 반면 $\Delta$ 기호가 없다는 것은 이전 버전과 차이가 없는 동일한 파일이라는 것을 의미한다. 즉, Version 2와 Version 3의 File A는 동일한 파일이다.

### 스냅샷
[스냅샷](https://ko.wikipedia.org/wiki/스냅샷_(기억_장치))(snapshot)은 정지된 시간(frozen time)에서의 시스템 상태이며, 데이터 write에 의한 간섭 없이 빠른 속도로 시스템을 저장할 수 있다. 여러 스냅샷 기법 중에서 [Copy-on-write](/docs/ko.Memory#copy-on-write)를 예시로 설명하자: Copy-on-Write는 프로젝트 데이터를 하나의 메모리에서 다른 물리 메모리로 복사하는 게 아니라 공유하기 때문에 속도가 빠르다. 그리고 공유된 메모리에 새로운 데이터를 write 하면 새로운 물리 메모리를 할당하여 데이터를 저장하여 기존 버전의 데이터를 보호한다.

![스냅샷 기법 버전 관리 시스템](/images/docs/git/vcs_snapshot.png)

다시 말해, 이전 버전과 동일한 데이터는 메모리 공유에 의해 그대로 포인터 참조되어 스냅샷 생성 시간 단축 및 메모리 최소화에 기여한다. 위의 그림에 나타난 점선 테두리 데이터(예. Version 3의 A1 파일, Version 2 및 Version 3의 B 파일 등)가 이에 해당한다. 그러나 이전 버전의 스냅샷에 크게 의존하므로 손상된 포인터가 있으면 버전 복원이 불가하다.

스냅샷 기법의 VCS도 타 버전과 비교하기 위해 diffs를 사용한다. 단, 델타 기법의 버전 관리와 달리 diffs 패치 여부가 아니라 스냅샷에 따라 버전을 구분짓는다.

> 본 내용은 스냅샷이 델타 방식보다 우월하다는 것을 논하는 게 아니다. 각 접근법은 장점과 단점이 있으며, 단지 Git은 스냅샷 기법을 택하였을 뿐이다.

# GIT: 기초
> *설치: [Git - Downloads](https://git-scm.com/downloads)*

Git은 [스냅샷](#스냅샷) 기법을 적용한 [분산 버전 관리](#분산-버전-관리) 시스템이다. 비록 작업공간이나 프로젝트가 들어있지 않더라도 Git으로부터 버전 관리가 되는 폴더를 저장소(repository)라고 부른다. Git 호스팅 서비스(예. GitHub, GitLab 등) 서버에서 클라이언트 컴퓨터로 저장소를 복사하는 것을 클론(clone)이라고 한다. 클라이언트 컴퓨터로 클론되거나 생성된 저장소에는 `.git` 폴더가 있어 버전 관리를 로컬에서 가능케 하고 서버의 저장소와 연동하는데 임한다.

Git 소프트웨어를 설치하면 CLI 혹은 GUI 어플리케이션으로 사용할 수 있다. GUI를 사용하면 편리하지만, 본문은 Git의 개념 및 동작 원리의 이해를 돕기 위해 CLI 위주로 설명한다. 여기서 윈도우 운영체제에서 Git을 설치하면 CMD 그리고 Bash 버전으로 두 개의 CLI 어플리케이션이 나타나지만, 이 둘은 사실상 동일하므로 아무거나 사용해도 무관하다.

## 환경설정
Git 소프트웨어는 총 세 가지의 환경설정 범위가 있다.

* `git config --local` (혹은 `git config`)
    : *개별 로컬 저장소에 대한 환경설정이며, `--local` 옵션을 명시하지 않아도 된다. 세 가지의 환경설정 범위 중에서 가장 우선순위가 높다.*
    
    * 파일 위치: `<repository>/.git/config`

* `git config --global`
    : *컴퓨터 장치의 개별 사용자에 대한 환경설정이다. 세 가지의 환경설정 범위 중에서 차순위이며, 로컬 환경변수에 언급되지 않았으면 글로벌 환경설정이 반영된다.*
    
    * 윈도우 파일: `C:\Users\<username>\.gitconfig`
    * 리눅스 파일: `~/.gitconfig`

* `git config --system`
    : *컴퓨터 장치에 전체적으로 적용된 환경설정이다. 세 가지의 환경설정 범위 중에서 가장 낮다.*

    * 윈도우 파일: `C:\Program Files\Git\etc\gitconfig`
    * 리눅스 파일: `/etc/gitconfig`

### 사용자 정보
Git 소프트웨어를 사용하기 위해 사용자 이름과 이메일 주소 입력이 요구된다. 이는 저장소에 기여된 내용을 누가 작업한 것인지 분별 및 확인하기 위한 요소이다. 로그인 시스템이 없으므로 이름과 이메일 주소는 아무런 텍스트를 삽입해도 Git을 사용할 수 있다.

> 만일 [GitHub Desktop](https://desktop.github.com/)을 설치 및 로그인 하였으면 Git 환경설정의 사용자 이름과 이메일 계정이 GitHub 계정을 토대로 자동으로 설정된다.

Git 환경설정에 사용자 정보를 입력하려면 다음과 같이 명령어를 입력한다.

```bash
git config --global user.name "Gihwan Ko"
git config --global user.email "GKO95@example.com"
```

## 상태
본 부문은 Git 버전 관리 시스템의 네 가지 상태를 설명한다.

> 여기서 커밋(commit)이란, 버전 관리에서 변경사항이 적용된 새로운 스냅샷(즉, 새로운 버전)을 생성하는 작업이다.

![Git의 라이프 사이클](/images/docs/git/git_lifecycle.png)

* **Untracked**
    : *VCS에서 변경사항을 추적할 수 없는 파일들이다. 이전 버전의 스냅샷에는 해당 파일이 존재하지 않아 비교를 할 수 없기에 추적 불가(untracked)하다. 즉, untracked 상태는 저장소에 새로 추가된 파일들을 가리킨다. 그 외의 상태를 통틀어 tracked 파일이라 부른다.*

* **Unmodified (aka. Committed)**
    : *現 스냅샷으로부터 변경사항이 없는 파일 상태이다. 서버로부터 저장소를 클론하거나 혹은 선택된 버전으로 히스토리 이동(일명 checkout)하면 저장소의 파일들은 스냅샷과 동일한 unmodified 상태로 재구성된다. 또한 변경사항을 VCS에 커밋할 시, 변경된 파일들은 새로 생성된 스냅샷 기준으로 동일하기 때문에 committed 상태라고도 부른다.*

* **Modified**
    : *現 스냅샷과 비교할 때 파일에 변경사항이 있지만, 아직 커밋이 이루어지지 않은 상태이다. 흔히 작업 중인 프로젝트 소스 및 환경 파일들을 수정하면 modified 상태가 된다. VCS로부터 파일 내용 변경을 취소하여 unmodified 상태로 되돌아 갈 수 있다.*

* **Staged**
    : *Modified 상태의 파일 변경사항 혹은 untracked 상태의 새 파일은 커밋되기 전에 우선 staged 상태로 전환된다. Staged 파일은 변경사항 및 새 파일을 저장소의 Staging Area에 임시 저장하여 안전하게 보관하며, 변경 취소 영향을 받지 않는다. 다시 말해, staged 상태는 작업 중인 modified 파일들을 새로운 버전으로 커밋하기 전에 변경사항 및 새 파일을 저장할 수 있는 편의를 제공한다.*

# GIT: 브랜치
[브랜치](https://en.wikipedia.org/wiki/Branching_(version_control))(branch)는 독립적인 버전 관리 작업흐름 개체이다. Git 저장소를 생성하면 `master` 브랜치가 함께 생성되어 버전 관리가 이루어진다.
